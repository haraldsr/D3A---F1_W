# TimesFM_OCD: Code and Results Package

This package contains the code, data, and results for the TimesFM_OCD project. It is intended for double-blind review and does not contain any author-identifying information. Please use this README to navigate the provided files and reproduce the main results.

## Directory Structure

- `modules/` — Core Python modules for data processing, metrics, inference, and utilities.
- `ROAD/` — Folder containing dataset-specific files (predictions, ground truth, timestamps, etc.) for the ROAD dataset.
- `figures/` — Output figures generated by the analysis scripts and notebooks.
- `interim/` — Intermediate results, including pickled result dictionaries and CSVs.
    This includes all intermediate data frames and result files needed to quickly reproduce:
    - The main results table
    - The bar plot comparisons
    - The statistical significance tests

## Main Files

- `Metric_comparison.ipynb` — Main analysis notebook. Reproduces all key results, tables, and figures.
- `inference_TimesFM.py` — Test scripts for model evaluation.
- `requirements.txt` — Python dependencies for running the code.
- `environment_tfm.yml` — Conda environment files (alternative to `requirements.txt`).
- `README.md` — This file.

## Getting Started

1. **Environment Setup**
   - Recommended: Create a new Python (==3.11) or Conda environment.
   - Install dependencies:
     ```bash
     pip install -r requirements.txt
     # or, using conda:
     conda env create -f environment_tfm.yml
     conda activate <env_name>
     ```

2. **Reproducing Results**
   - Open `Metric_comparison.ipynb`.
   - Run all cells to reproduce the main results, tables, and figures.
   - Output figures will be saved in the `figures/` directory.
   - Intermediate data frames and results for the bar plot, statistical tests, and results table are precomputed and included in the `interim/` directory for convenience.

3. **Data**
   - Only the ROAD dataset prediction files are included in this package. All other dataset files (ADARP, WA) are too large to distribute, and a smaller sample would not be representative.
   - **ROAD dataset:**
     - The ROAD dataset is available at: https://www.media.mit.edu/tools/affectiveroad/
     - You may download the full dataset and use the `inference_TimesFM.py` script to generate the results from scratch if desired.
     - Alternatively, you can use the provided pre-calculated results in the package.
   - **ADARP dataset:**
     - The ADARP dataset is available at: https://zenodo.org/records/6640290
     - You may download this dataset and use the `inference_TimesFM.py` script to generate results if desired.
     - No ADARP prediction files are included in this package due to file size constraints.
   - **Wrist Angel (WA) dataset:**
     - This dataset is not public. Only pre-calculated results can be used for WA, but these are not included (will be after review) due to file size constraints.

4. **Scripts and Modules**
   - Core metric implementations and utilities are in `modules/`.
   - Test scripts can be run directly for additional evaluation.

## Code Formatting and Linting

- Code formatting: [black](https://pypi.org/project/black/)
- Linting: [flake8](https://pypi.org/project/flake8/)

To format and lint the code, run the following commands from the project root:
```bash
black .
flake8 .
```

## Notes

- This package is self-contained for the ROAD dataset. No internet access or external data is required for running the main analysis on the included files.
- All code and results are anonymized for double-blind review.
- For any issues running the code, please ensure all dependencies are installed and the working directory is set to the root of the unzipped package.